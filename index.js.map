{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nexport async function getImagesByQuery(query, pageNo = 1) {\n    try {\n        const response = await axios.get(\"https://pixabay.com/api/\", {\n            params: {\n                key: \"53489981-68e2194cff91adb725bcb77ca\",\n                q: query,\n                image_type: \"photo\",\n                orientation: \"horizontal\",\n                safesearch: true,\n                page: pageNo,\n                per_page: 15\n            }\n        });\n        return response.data;\n    } \n    catch (error) {\n        throw new Error(\"Pixabay API error\");\n    }\n\n}\n","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst refs = {\n\n    gallery: document.querySelector(\".js-gallery\"),\n    loader: document.querySelector(\".js-loader\"),\n    loadMoreBtn: document.querySelector(\".js-load-more\"),\n}\n\nlet lightbox = new SimpleLightbox(\".gallery a\", {\n  captionsData: \"alt\",\n  captionDelay: 250,\n});\n\n\n// ======== TEMPLATE FOR ONE IMAGE ===\nfunction imageTemplate({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) {\n    return `\n    <li class = \"gallery-item\">\n        <a href=\"${largeImageURL}\">\n            <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" width=\"360\" height=\"200\"/>\n        </a>\n        <div class=\"card-info\">\n            <div class=\"headers\"><span>Likes</span><span>Views</span><span>Comments</span><span>Downloads</span></div>\n            <div class=\"values\"><span>${likes}</span><span>${views}</span><span>${comments}</span><span>${downloads}</span></div>\n        </div>\n    </li>`;\n}\n// ======== TEMPLATE FOR ARRAY OF IMAGES ===\nfunction galleryTemplate(images) {\n    return images.map(imageTemplate).join(\"\")\n}\n// =========================================\nexport function createGallery(images) {\n    const markup = galleryTemplate(images);\n    refs.gallery.insertAdjacentHTML(\"beforeend\", markup);\n    lightbox.refresh();\n}\n\n//=======================================\n\nexport function clearGallery(){\n  refs.gallery.innerHTML = \"\";\n}\n//======================================\n\nexport function showLoader() {\n    refs.loader.classList.remove(\"hidden\")\n}\n//========================================\n\nexport function hideLoader() {\n    refs.loader.classList.add(\"hidden\")\n}\n//==========================================\nexport function showLoadMoreButton() {\n    refs.loadMoreBtn.classList.remove(\"hidden\")\n}\n\nexport function hideLoadMoreButton() {\n    refs.loadMoreBtn.classList.add(\"hidden\")\n}\n\nexport function checkBtnStatus(page, totalPages) {\n    if (page < totalPages) {\n        showLoadMoreButton();\n    } else {\n        hideLoadMoreButton(); \n    }\n}","import { getImagesByQuery }  from \"./js/pixabay-api\"\n// import moduleName from \"./js/render-functions\";\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport {\n    createGallery,\n    clearGallery,\n    showLoader,\n    hideLoader,\n    showLoadMoreButton,\n    hideLoadMoreButton,\n    checkBtnStatus,\n} from \"./js/render-functions\";\n\nconst refs = {\n    form: document.querySelector(\".js-pixabay-form\"),\n    input: document.querySelector(\"input[name='search-text']\"),\n    loadMoreBtn: document.querySelector(\".js-load-more\")\n}\nconst PAGE_SIZE = 15;\nlet query = \"\";\nlet page;\nlet totalHits = 0;\nlet totalPages;\n\nfunction smoothScroll() {\n    const firstCard = document.querySelector(\".gallery-item\");\n    if (!firstCard) return;\n\n    const { height: cardHeight } = firstCard.getBoundingClientRect();\n\n    window.scrollBy({\n        top: cardHeight * 2,\n        behavior: \"smooth\"\n    });\n}\n\n//===============submit==============================\nrefs.form.addEventListener(\"submit\", async e => {\n    e.preventDefault();\n\n    const formData = new FormData(e.target);\n\n    query = formData.get(\"search-text\").trim();\n\n    // query = e.target.elements[\"search-text\"].value.trim();\n\n    if (!query) {\n        iziToast.show({\n            title: 'Hey',\n            message: 'Please enter a search query!'\n        });\n        return;\n    }\n\n    page = 1;\n    clearGallery();\n    hideLoadMoreButton();\n    showLoader();\n    \n    \n    try {\n        const data = await getImagesByQuery(query, page);\n        totalHits = data.totalHits;\n\n        if (data.hits.length === 0) {\n            iziToast.error({\n                message: \"Sorry, there are no images matching your search query. Please try again!\",\n                position: \"topRight\",\n            });\n            return;\n        }\n\n        const images = data.hits;\n        createGallery(images);\n\n        totalPages = Math.ceil(totalHits / PAGE_SIZE) \n        \n        checkBtnStatus(page, totalPages);\n        \n        \n    } catch (err) {\n        iziToast.error({\n            message: \"We're sorry, but you've reached the end of search results.\",\n            position: \"topRight\",\n        });\n    } finally {\n        hideLoader();\n    }\n    \n    refs.form.reset();\n});\n\n//================Load More===========================\nrefs.loadMoreBtn.addEventListener(\"click\", async () => {\n    page += 1;\n    showLoader();\n\n    try {\n        const data = await getImagesByQuery(query, page);\n        createGallery(data.hits);\n        \n        smoothScroll()\n\n        if (page >= totalPages) {\n            hideLoadMoreButton();\n            iziToast.error({\n                message: \"We're sorry, but you've reached the end of search results.\",\n                position: \"topRight\",\n            });\n        } else {\n            checkBtnStatus(page, totalPages);\n        }\n\n    } catch (err) {\n        iziToast.error({\n            message: \"Something went wrong!\",\n            position: \"topRight\",\n        });\n    } finally {\n        hideLoader();\n    }\n});"],"names":["getImagesByQuery","query","pageNo","axios","refs","lightbox","SimpleLightbox","imageTemplate","webformatURL","largeImageURL","tags","likes","views","comments","downloads","galleryTemplate","images","createGallery","markup","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","checkBtnStatus","page","totalPages","PAGE_SIZE","totalHits","smoothScroll","firstCard","cardHeight","iziToast","data"],"mappings":"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"}